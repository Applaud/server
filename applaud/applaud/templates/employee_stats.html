{% extends "base.html" %}
{% block title %}Your Statistics{% endblock %}
{% block scripts %}
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
      google.load("visualization", "1", {packages:["corechart"]});
      google.setOnLoadCallback(drawVisualization);


function drawVisualization() {
  // Create and populate the data table.
  var data = google.visualization.arrayToDataTable(
    {{ chartdata|safe }} 

/*    [['Year', 'Austria', 'Bulgaria', 'Denmark', 'Greece'],
    ['2003',  1336060,    400361,    1001582,   997974],
    ['2004',  1538156,    366849,    1119450,   941795],
    ['2005',  1576579,    440514,    993360,    930593],
    ['2006',  1600652,    434552,    1004163,   897127],
    ['2007',  1968113,    393032,    979198,    1080887],
    ['2008',  1901067,    517206,    916965,    1056036]]
*/
  );

  // Create and draw the visualization.
  new google.visualization.BarChart(document.getElementById('visualization')).
      draw(data,
           {title:"Evaluations by Dimension",
            width:600, height:400,
            vAxis: {title: "Dimension"},
            hAxis: {title: "Rating"}}
      );
}
</script>
{% endblock %}
{% block content %}
<p>Hello, {{ employee.first_name }}! Let's see how you're doing.</p>
<!-- list employee statistics by dimension -->
{% for success_map in success_map_list %}
<strong>{{ success_map.dimension }}</strong> ( {{ success_map.values|length }} ratings }} )
{% if success_map.values|length > 0 %}
<!-- list ratings for a given dimension -->
<ul>
{% for rating in success_map.values %}
<li>{{ rating.rating_value }}</li>
{% endfor %}
</ul>
<!-- end list ratings for a given dimension -->
{% else %}
No statistics yet!
{% endif %}

{% endfor %}
<div id="visualization" style="width: 900px; height: 500px;"></div>
<!-- end of employee statistics by dimension -->

{% endblock %}
